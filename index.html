<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0    <section>
      <h2>How It Works</h2>
      <p>
        GitMoni uses a <strong>multi-branch architecture</strong> for clean separation:
      </p>
      <ul>
        <li><strong>master</strong> ‚Üí Main branch with automation workflows and scripts</li>
        <li><strong>transactions</strong> ‚Üí Append-only blockchain ledger (JSON files)</li>
        <li><strong>gh-pages</strong> ‚Üí This website with real-time balance explorer</li>
      </ul>
      <p>
        <strong>Automated workflows</strong> handle everything: star detection, token distribution, 
        transaction validation, and website updates. <strong>No manual intervention needed!</strong>
      </p>
    </section>>GitMoni</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      background: #0d1117; /* match submit.html dark */
      color: #e6edf3;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      padding: 20px;
    }
    nav {
      margin: 15px 0;
    }
    nav .btn {
      margin: 0 6px;
    }
    main {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      text-align: left;
    }
    section {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 20px;
    }
    h1, h2 {
      margin-top: 0;
      color: #f0f6fc;
    }
    .btn {
      display: inline-block;
      padding: 10px 16px;
      border: 1px solid #30363d;
      border-radius: 6px;
      background: #21262d;
      color: #e6edf3;
      text-decoration: none;
      cursor: pointer;
    }
    .btn:hover {
      background: #30363d;
    }
    input.mono {
      background:#0d1117;
      color:#e6edf3;
      border:1px solid #30363d;
      border-radius:6px;
      padding:8px;
      font-family: ui-monospace, Menlo, Consolas, monospace;
      width: 250px;
    }
    .pill {
      display:inline-block;
      padding:4px 10px;
      border:1px solid #30363d;
      border-radius:999px;
      background:#21262d;
      margin: 4px;
    }
    footer {
      margin: 30px 0;
      font-size: 0.9em;
      color: #8b949e;
    }
  </style>
</head>
<body>
  <header>
    <h1>üåê GitMoni</h1>
    <p>GitHub-based cryptocurrency where you earn tokens by starring the repository.</p>
  </header>

  <nav>
    <a class="btn" href="explorer.html">üîé Explorer</a>
    <a class="btn" href="submit.html">‚úçÔ∏è Submit Transaction</a>
    <a class="btn" href="https://github.com/gitmoni-crypto/gitmoni" target="_blank">üì¶ GitHub Repo</a>
  </nav>

  <main>
    <section>
      <h2>üí∞ Check Your Balance</h2>
      <p>Enter your GitHub username to see your MONI balance:</p>
      <input id="ghuser" class="mono" placeholder="your GitHub username" />
      <button id="check" class="btn">Check Balance</button>
      <div style="margin-top:10px;">
        <span class="pill" id="addr">address: ‚Äî</span>
        <span class="pill" id="bal">balance: ‚Äî</span>
      </div>
      <p style="margin-top:8px; font-size: 0.9em; color: #8b949e;">
        üí° Your address format: <code>gh:USERNAME</code> ‚Ä¢ Balances update automatically every 10 minutes
      </p>
    </section>

    <section>
      <h2>What is GitMoni?</h2>
      <p>
        GitMoni is a cryptocurrency built on GitHub where users earn tokens by starring the repository. 
        It uses GitHub's infrastructure for trust, identity, and transaction storage.
        The system runs completely automated - just star the repo and receive your tokens!
      </p>
    </section>

    <section>
      <h2>How to get MONI</h2>
      <ol>
        <li>‚≠ê <strong>Star the repo</strong> - that's it!</li>
        <li><strong>Automated faucet</strong> runs every 10 minutes detecting new stargazers</li>
        <li><strong>Receive tokens</strong> based on your star rank: amount = G1 √∑ rank</li>
        <li><strong>Check your balance</strong> above or in the Explorer</li>
      </ol>
      <p><strong>Your address:</strong> <code>gh:YOUR_GITHUB_USERNAME</code></p>
    </section>

    <section>
      <h2>Token Economics</h2>
      <ul>
        <li><strong>Rank 1:</strong> 1,618,033,989 MONI (Golden ratio √ó 10‚Åπ)</li>
        <li><strong>Rank 2:</strong> 809,016,994 MONI (G1 √∑ 2)</li>
        <li><strong>Rank 3:</strong> 539,344,663 MONI (G1 √∑ 3)</li>
        <li><strong>Rank n:</strong> G1 √∑ n MONI</li>
      </ul>
      <p>Earlier supporters get exponentially more tokens, but everyone gets some!</p>
    </section>

    <section>
      <h2>The Ledger</h2>
      <p>
        All transactions are public JSON files in the
        <code>transactions</code> branch. The Explorer provides fast indexes
        (<code>balances.json</code>, <code>txmeta.json</code>) for quick lookups.
      </p>
      <p>
        Every transaction is validated by GitHub Actions. The <code>from</code> 
        field must match the PR actor‚Äôs GitHub login.
      </p>
    </section>

    <section>
      <h2>Key Features</h2>
      <ul>
        <li><strong>ü§ñ Fully Automated</strong> - Star faucet runs every 10 minutes</li>
        <li><strong>üîç Transparent</strong> - All transactions visible in git history</li>
        <li><strong>üèóÔ∏è GitHub Native</strong> - Uses GitHub's infrastructure for everything</li>
        <li><strong>‚ö° Real-time</strong> - Website updates automatically with new transactions</li>
        <li><strong>üõ°Ô∏è Validated</strong> - All transactions checked for integrity</li>
        <li><strong>üéØ Fair Distribution</strong> - Earlier supporters get more, but everyone gets some</li>
      </ul>
    </section>

    <section>
      <h2>Get Started</h2>
      <ol>
        <li>‚≠ê <strong>Star</strong> the <a href="https://github.com/gitmoni-crypto/gitmoni" target="_blank">GitMoni repository</a></li>
        <li>‚è∞ <strong>Wait</strong> for the next faucet run (every 10 minutes)</li>
        <li>üí∞ <strong>Check</strong> your balance above or in the <a href="explorer.html">Explorer</a></li>
        <li>üí∏ <strong>Transfer</strong> tokens using <a href="submit.html">Submit Transaction</a></li>
      </ol>
      <p><em>That's it! The system handles everything automatically.</em></p>
    </section>
  </main>

  <footer>
    <p>
      Built with ‚ù§Ô∏è on GitHub Pages ‚Ä¢ 
      Source: <a href="https://github.com/gitmoni-crypto/gitmoni">gitmoni-crypto/gitmoni</a>
    </p>
  </footer>

  <script type="module">
    const $ = (s)=>document.querySelector(s);
    const ghAddr = (u)=> `gh:${(u||'').trim()}`;
    const fmt = (n)=> (n??0).toLocaleString(undefined, { maximumFractionDigits: 8 });

    let BAL = null;
    async function loadBalances() {
      if (BAL) return BAL;
      try {
        const r = await fetch('data/balances.json', { cache: 'no-store' });
        BAL = await r.json();
      } catch {
        BAL = {};
      }
      return BAL;
    }

    async function showBalance() {
      const user = $('#ghuser').value.trim();
      const addr = ghAddr(user);
      $('#addr').textContent = `address: ${addr || '‚Äî'}`;
      if (!user) { $('#bal').textContent = 'balance: ‚Äî'; return; }

      const bal = await loadBalances();
      const v = bal[addr] ?? 0;
      $('#bal').textContent = `balance: ${fmt(v)} MONI`;
    }

    $('#check').addEventListener('click', showBalance);
    $('#ghuser').addEventListener('keydown', (e)=> { if (e.key === 'Enter') showBalance(); });

    // Prefill from ?user= param
    const params = new URLSearchParams(location.search);
    const pre = params.get('user') || (params.get('addr') || '').replace(/^gh:/,'');
    if (pre) { $('#ghuser').value = pre; showBalance(); }
  </script>
</body>
</html>
